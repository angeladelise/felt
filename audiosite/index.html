<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Felt</title>
    <meta name="description" content="felt">
    <meta name="author" content="felt">
</head>
<body>

    <img src="images/felt_logo.png" width=500px alt="Felt Logo">

    <!-- TIMER SECTION  <div id="worked">00:00</div> -->
    
    <div id="worked">00:00</div>
    <div id="time">:</div>



    <p>Goal: Find the button down shirt and write the review rating number in the box below before the time runs out. </p>
    
        Review Rating Number:<br>
        <input type="text" name="Review Rating Number" id="rating" value="">
        <button onclick ="ratingcheck()"> Submit </button>

    

    <!-- THIS PLAYS EVERY LINE -->
	<div id="cwrap">
	    <div id="nowPlay">
	        <h3 id="npAction">Paused:</h3>
	        <div id="npTitle"></div>
	    </div>
	    <div id="audiowrap">
	        <div id="audio0">
	            <audio id="audio1" controls="controls" width="300">
	                Your browser does not support the HTML5 Audio Tag.
	            </audio>
	        </div>
	        <div id="extraControls">
	            <button id="btnPrev" class="ctrlbtn">|&lt;&lt; Prev Line </button> <button id="btnNext" class="ctrlbtn">Next Line &gt;&gt;|</button>
	        </div>
	    </div>
	
	</div>

    <!-- THIS PLAYS EVERY LANDMARK -->
    <div id="cwrap">
        <div id="nowPlay">
            <h3 id="npAction">Paused:</h3>
            <div id="npTitle"></div>
        </div>
        <div id="audiowrap">
            <div id="audio0">
                <audio id="audio1" controls="controls" width="300">
                    Your browser does not support the HTML5 Audio Tag.
                </audio>
            </div>
            <div id="extraControls">
                <button id="btnLandmarkPrev" class="ctrlbtn">|&lt;&lt; Prev Landmark </button> <button id="btnLandmarkNext" class="ctrlbtn">Next Landmark &gt;&gt;|</button>
            </div>
        </div>
    
     </div>
    <!-- THIS PLAYS EVERY LINK -->
    <div id="cwrap">
        <div id="nowPlay">
            <h3 id="npAction">Paused:</h3>
            <div id="npTitle"></div>
        </div>
        <div id="audiowrap">
            <div id="audio0">
                <audio id="audio1" controls="controls" width="300">
                    Your browser does not support the HTML5 Audio Tag.
                </audio>
            </div>
            <div id="extraControls">
                <button id="btnLinkPrev" class="ctrlbtn">|&lt;&lt; Prev Link </button> <button id="btnLinkNext" class="ctrlbtn">Next Link &gt;&gt;|</button>
            </div>
        </div>
    
     </div>

     <!-- THIS PLAYS EVERY HEADER -->
    <div id="cwrap">
        <div id="nowPlay">
            <h3 id="npAction">Paused:</h3>
            <div id="npTitle"></div>
        </div>
        <div id="audiowrap">
            <div id="audio0">
                <audio id="audio1" controls="controls" width="300">
                    Your browser does not support the HTML5 Audio Tag.
                </audio>
            </div>
            <div id="extraControls">
                <button id="btnHeaderPrev" class="ctrlbtn">|&lt;&lt; Prev Header </button> <button id="btnHeaderNext" class="ctrlbtn">Next Header &gt;&gt;|</button>
            </div>
        </div>
    
     </div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

     <script type="text/javascript">
            jQuery(function($) {
                var supportsAudio = !!document.createElement('audio').canPlayType;
                if(supportsAudio) {
                    var index = 0, indexLink = 0, indexHeader = 0, indexLandmark = 0,
                    playing = false;
                    mediaPath = 'audio/',
                    extension = '',
                    tracks = [
                        {"track":0,"name":"End of List","length":"00:00","file":"end"},
                        {"track":1,"name":"Landmark Banner","length":"00:00","file":"landmark_banner"},
                        {"track":2,"name":"Sign In","length":"00:00","file":"link_signin"},
                        {"track":3,"name":"Felt Logo","length":"00:00","file":"link_imagelogo"},

                        {"track":4,"name":"Home","length":"00:00","file":"link_home"},
                        {"track":5,"name":"Women","length":"00:00","file":"link_women"},
                        {"track":6,"name":"Men","length":"00:00","file":"link_men"},
                        {"track":7,"name":"Customer Service","length":"00:00","file":"link_customer"},
                        {"track":8,"name":"Shopping Cart","length":"00:00","file":"link_shoppingcart"},

                        {"track":9,"name":"Sale","length":"00:00","file":"header_sale"},
                        
                        {"track":10,"name":"Blouse","length":"00:00","file":"header_blouse"},
                        {"track":10,"name":"Price","length":"00:00","file":"price_18.99"},
                        {"track":10,"name":"Colors","length":"00:00","file":"colors_4"},
                        {"track":10,"name":"Rating","length":"00:00","file":"rating_4.2"},

                        {"track":11,"name":"Graphic T","length":"00:00","file":"header_graphict"},
                        {"track":10,"name":"Price","length":"00:00","file":"price_10.99"},
                        {"track":10,"name":"Colors","length":"00:00","file":"colors_6"},
                        {"track":10,"name":"Rating","length":"00:00","file":"rating_4.6"},

                        {"track":12,"name":"Basic V Neck","length":"00:00","file":"header_basicv"},
                        {"track":10,"name":"Price","length":"00:00","file":"price_9.99"},
                        {"track":10,"name":"Colors","length":"00:00","file":"colors_10"},
                        {"track":10,"name":"Rating","length":"00:00","file":"rating_4.8"},

                        {"track":13,"name":"Tank Top","length":"00:00","file":"header_tanktop"},
                        {"track":10,"name":"Price","length":"00:00","file":"price_17.99"},
                        {"track":10,"name":"Colors","length":"00:00","file":"colors_7"},
                        {"track":10,"name":"Rating","length":"00:00","file":"rating_3.9"},

                        {"track":14,"name":"Sweater","length":"00:00","file":"header_sweater"},
                        {"track":10,"name":"Price","length":"00:00","file":"price_21.99"},
                        {"track":10,"name":"Colors","length":"00:00","file":"colors_3"},
                        {"track":10,"name":"Rating","length":"00:00","file":"rating_3.5"},

                        {"track":15,"name":"Button Down","length":"00:00","file":"header_buttondown"},
                        {"track":10,"name":"Price","length":"00:00","file":"price_18.99"},
                        {"track":10,"name":"Colors","length":"00:00","file":"colors_4"},
                        {"track":10,"name":"Rating","length":"00:00","file":"rating_4.3"},

                        {"track":16,"name":"Shoulder","length":"00:00","file":"header_shoulder"},
                        {"track":10,"name":"Price","length":"00:00","file":"price_20.99"},
                        {"track":10,"name":"Colors","length":"00:00","file":"colors_3"},
                        {"track":10,"name":"Rating","length":"00:00","file":"rating_4.1"},

                        {"track":17,"name":"Plaid","length":"00:00","file":"header_plaid"},
                        {"track":10,"name":"Price","length":"00:00","file":"price_15.99"},
                        {"track":10,"name":"Colors","length":"00:00","file":"colors_5"},
                        {"track":10,"name":"Rating","length":"00:00","file":"rating_3.8"},

                        {"track":18,"name":"End of List","length":"00:00","file":"end"}
                    ],

                    tracksLandmark = [
                        {"track":0,"name":"End of List","length":"00:00","file":"end"},
                        {"track":1,"name":"Landmark Banner","length":"00:00","file":"landmark_banner"},
                        {"track":2,"name":"Navigation","length":"00:00","file":"landmark_navigation"},
                        {"track":3,"name":"Main","length":"00:00","file":"landmark_main"},
                        {"track":4,"name":"End of List","length":"00:00","file":"end"}
                    ],

                     tracksLink = [
                        {"track":0,"name":"End of List","length":"00:00","file":"end"},
                        {"track":1,"name":"Sign In","length":"00:00","file":"link_signin"},
                        {"track":2,"name":"Felt Logo","length":"00:00","file":"link_imagelogo"},
                        {"track":3,"name":"Home","length":"00:00","file":"link_home"},
                        {"track":4,"name":"Women","length":"00:00","file":"link_women"},
                        {"track":5,"name":"Men","length":"00:00","file":"link_men"},
                        {"track":6,"name":"Customer Service","length":"00:00","file":"link_customer"},
                        {"track":7,"name":"Shopping Cart","length":"00:00","file":"link_shoppingcart"},
                        {"track":8,"name":"End of List","length":"00:00","file":"end"}
                    ],

                    tracksHeader = [
                        {"track":0,"name":"End of List","length":"00:00","file":"end"},
                        {"track":1,"name":"Sale","length":"00:00","file":"header_sale"},
                        {"track":2,"name":"Blouse","length":"00:00","file":"header_blouse"},
                        {"track":3,"name":"Graphic T","length":"00:00","file":"header_graphict"},
                        {"track":4,"name":"Basic V Neck","length":"00:00","file":"header_basicv"},
                        {"track":5,"name":"Tank Top","length":"00:00","file":"header_tanktop"},
                        {"track":6,"name":"Sweater","length":"00:00","file":"header_sweater"},
                        {"track":7,"name":"Button Down","length":"00:00","file":"header_buttondown"},
                        {"track":8,"name":"Shoulder","length":"00:00","file":"header_shoulder"},
                        {"track":9,"name":"Plaid","length":"00:00","file":"header_plaid"},
                        {"track":10,"name":"End of List","length":"00:00","file":"end"}
                    ],

                    trackCount = tracks.length,
                    trackLandmarkCount = tracksLandmark.length,
                    trackLinkCount = tracksLink.length,
                    trackHeaderCount = tracksHeader.length,
                    npAction = $('#npAction'),
                    npTitle = $('#npTitle'),
                    audio = $('#audio1').bind('play', function() {
                        playing = true;
                        npAction.text('Now Playing:');
                    }).bind('pause', function() {
                        playing = false;
                        npAction.text('Paused:');
                    }).bind('ended', function() {
                        npAction.text('Paused:');
                        audio.pause();
                    

                    }).get(0),

                    btnPrev = $('#btnPrev').click(function() {
                        if((index - 1) > -1) {
                            index--;
                            loadTrack(index);
                            audio.play();
                            console.log("line" + index);

                            /* WANT TO AUTOMATICALLY PLAY NEXT TRACK WHEN 'PREV BUTTON' IS PRESSED
                            if(playing) {
                                audio.play();
                            }
                            */
                        } else {
                            audio.play();
                            /* DONT WANT AUDIO TO LOOP BACK TO FRONT, STAY WHERE YOU ARE!
                            index = 0;
                            loadTrack(index);
                            */
                        }
                    }),
                    btnNext = $('#btnNext').click(function() {
                        if((index + 1) < trackCount) {
                            index++;
                            loadTrack(index);
                            audio.play();
                            console.log("line" + index);
                             /* AFTER YOU PLAY THE SONG GO TO NEXT TRACK*/

                            /* WANT TO AUTOMATICALLY PLAY NEXT TRACK WHEN 'NEXT BUTTON' IS PRESSED
                            if(playing) {
                                audio.play();
                            }
                            */
                        } else {
                            audio.play();
                            /* DONT WANT AUDIO TO LOOP BACK TO FRONT, STAY WHERE YOU ARE!
                            index = 0;
                            loadTrack(index);
                            */
                        }
                    }),

                    /* THIS BUTTONS FOR THE LANDMARKS TRACKS  */ 

                     btnLandmarkPrev = $('#btnLandmarkPrev').click(function() {
                        if((indexLandmark - 1) > -1) {
                            indexLandmark--;
                            loadLandmarkTrack(indexLandmark);
                            audio.play();
                            console.log("landmark" + indexLandmark);
                        } else {
                            audio.play();
                        }
                    }),

                    btnLandmarkNext = $('#btnLandmarkNext').click(function() {
                        if((indexLandmark + 1) < trackLandmarkCount) {
                            indexLandmark++;
                            loadLandmarkTrack(indexLandmark);
                            audio.play();
                            console.log("landmark" + indexLandmark);
                        } else {
                            audio.play();
                        }
                    }),

                    /* THIS BUTTONS FOR THE LINK TRACKS  */ 

                     btnLinkPrev = $('#btnLinkPrev').click(function() {
                        if((indexLink - 1) > -1) {
                            indexLink--;
                            loadLinkTrack(indexLink);
                            audio.play();
                            console.log("link" + indexLink);
                        } else {
                            audio.play();
                        }
                    }),

                    btnLinkNext = $('#btnLinkNext').click(function() {
                        if((indexLink + 1) < trackLinkCount) {
                            indexLink++;
                            loadLinkTrack(indexLink);
                            audio.play();
                            console.log("link" + indexLink);
                        } else {
                            audio.play();
                        }
                    }),

                     /* THIS BUTTONS FOR THE HEADER TRACKS  */ 

                     btnHeaderPrev = $('#btnHeaderPrev').click(function() {
                        if((indexHeader - 1) > -1) {
                            indexHeader--;
                            loadHeaderTrack(indexHeader);
                            audio.play();
                            console.log("header" + indexHeader);
                        } else {
                            audio.play();
                        }
                    }),

                    btnHeaderNext = $('#btnHeaderNext').click(function() {
                        if((indexHeader + 1) < trackHeaderCount) {
                            indexHeader++;
                            loadHeaderTrack(indexHeader);
                            audio.play();
                            console.log("header" + indexHeader);
                        } else {
                            audio.play();
                        }
                    }),

                    li = $('#plUL li').click(function() {
                        var id = parseInt($(this).index());
                        if(id !== index) {
                            playTrack(id);
                        }
                    }),
                    
                    /* THIS IS FOR EVERY LINE TRACK  */ 

                    loadTrack = function(id) {
                        $('.plSel').removeClass('plSel');
                        $('#plUL li:eq(' + id + ')').addClass('plSel');
                        npTitle.text(tracks[id].name);
                        index = id;
                        audio.src = mediaPath + tracks[id].file + extension;
                    },
                    playTrack = function(id) {
                        loadTrack(id);
                        audio.play();
                    }, 

                     /* THIS IS FOR EVERY LANDMARK TRACK  */ 

                    loadLandmarkTrack = function(id) {
                        $('.plSel').removeClass('plSel');
                        $('#plUL li:eq(' + id + ')').addClass('plSel');
                        npTitle.text(tracksLandmark[id].name);
                        indexLandmark = id;
                        audio.src = mediaPath + tracksLandmark[id].file + extension;
                    },
                    playTrack = function(id) {
                        loadLandmarkTrack(id);
                        audio.play();
                    },

                    /* THIS IS JUST FOR THE LINK TRACKS  */ 
                    loadLinkTrack = function(id) {
                        $('.plSel').removeClass('plSel');
                        $('#plUL li:eq(' + id + ')').addClass('plSel');
                        npTitle.text(tracksLink[id].name);
                        indexLink = id;
                        audio.src = mediaPath + tracksLink[id].file + extension;
                    },
                    playLinkTrack = function(id) {
                        loadLinkTrack(id);
                        audio.play();
                    },

                     /* THIS IS JUST FOR THE HEADER TRACKS  */ 
                    loadHeaderTrack = function(id) {
                        $('.plSel').removeClass('plSel');
                        $('#plUL li:eq(' + id + ')').addClass('plSel');
                        npTitle.text(tracksHeader[id].name);
                        indexHeader = id;
                        audio.src = mediaPath + tracksHeader[id].file + extension;
                    },
                    playHeaderTrack = function(id) {
                        loadHeaderTrack(id);
                        audio.play();
                    };

                    if(audio.canPlayType('audio/ogg')) {
                        extension = '.ogg';
                    }
                    if(audio.canPlayType('audio/mpeg')) {
                        extension = '.mp3';
                    }
                   

                    loadTrack(index);
                }
                
            });

            function ratingcheck() {
                var value = document.getElementById("rating").value;
                if (value == 4.3) {
                    window.alert("correct!");
                } else {
                    window.alert("try again");
                }
            }


            $(document).ready(function (e) {
                var $worked = $("#worked");

                function update() {
                    var myTime = $worked.html();
                    var ss = myTime.split(":");
                    var dt = new Date();
                    dt.setHours(0);
                    dt.setMinutes(ss[0]);
                    dt.setSeconds(ss[1]);

                    var dt2 = new Date(dt.valueOf() + 1000);
                    var temp = dt2.toTimeString().split(" ");
                    var ts = temp[0].split(":");
                    /* splitting minutes and seconds in an array
                    

                    console.log("ts1 " + ts[1] + " ts2 " + ts[2]);
                    console.log("3 " + 3 - ts[1] + " ts2 " + 59 - ts[2]);
                    */

                    var minutes = ts[1];
                    var seconds = ts[2];

                    var countdownmin = 3 - minutes;
                    var coundownsec = seconds;
                    var displaysec = 59 - seconds;
                    console.log("minutes " + countdownmin + " seconds " + displaysec);


                    document.getElementById('time').innerHTML = countdownmin + ":" + displaysec; 

                    $worked.html(ts[1]+":"+ts[2]);
                    setTimeout(update, 1000);

                    if(countdownmin == 0 && displaysec ==0){
                        window.alert("You ran out of time!");

                    }
                }

                setTimeout(update, 1000);
            });

            
        </script>
    </body>
</html>